<!DOCTYPE html>
<html>
<head>
  <title>Submit to Google Sheets</title>
  <link rel="stylesheet" href="assets/formv2.css">

</head>

<body>

<div class="container">
	<!-- code here -->
	<div class="card">
		<div class="card-image">	
			<h2 class="card-heading">
                <small>"This is the day that the Lord has made; let us rejoice and be glad in it."</small>

				-Psalm 118:24
				
			</h2>
		</div>
		<form class="card-form" id="myForm">
			<div class="input">
				<input type="text" class="input-field" name="Full Name" required/>
				<label class="input-label">Full name</label>
			</div>
						<div class="input">
				<input type="text" class="input-field" name="Email" required/>
				<label class="input-label">Email</label>
			</div>
            <div class="input">
				<input type="tel" class="input-field" name="Phone" required/>
				<label class="input-label">Phone</label>
			</div>
        <div class="input">
           <textarea id="address" name="address" class="input-field" rows="2" required></textarea>
            <label for="address" class="input-label">Address</label>
            </div>

			<div class="action">
				<button class="action-button" id="submitBtn">
                    <span class="btn-text">Get started</span>
      <span class="loader" style="display: none;">⏳</span>
    </button>
			</div>
              <div id="status" style="margin-top: 10px;"></div>
		</form>
		<div class="card-info">
			<p>By signing up you are agreeing to our <a href="#" id="openTerms">Terms and Conditions</a></p>
		</div>
	</div>
</div>
<div id="termsModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h3>Terms and Conditions</h3>
    <p>
      <!-- Your terms go here -->
      By using this form, you agree to abide by our policies. Your data will be handled securely, and you must provide accurate information.
    </p>
  </div>
</div>
<script>
const scriptURL = 'https://script.google.com/macros/s/AKfycbxuXKBYXQFaMowRl0PymFcRXEsO13nz-aDrIcvaIrnQBh3_ZrSAtsnsYGUNbMyj1mU4Bg/exec';
const submitBtn = document.getElementById('submitBtn');
const btnText = submitBtn.querySelector('.btn-text');
const loader = submitBtn.querySelector('.loader');
const openTermsBtn = document.getElementById('openTerms');
const termsModal = document.getElementById('termsModal');
const closeBtn = termsModal.querySelector('.close');

// Open modal when link is clicked
openTermsBtn.addEventListener('click', (e) => {
  e.preventDefault(); // Prevent jumping to top
  termsModal.style.display = 'block';
});

// Close modal when (x) is clicked
closeBtn.addEventListener('click', () => {
  termsModal.style.display = 'none';
});

// Close modal when clicking outside the modal content
window.addEventListener('click', (e) => {
  if (e.target === termsModal) {
    termsModal.style.display = 'none';
  }
});




document.getElementById('myForm').addEventListener('submit', e => {
  e.preventDefault();
  const form = e.target;
  const formData = new FormData(form);
 const email = formData.get('Email').trim();
  const phone = formData.get('Phone').trim();

  // Email validation: must contain '@' and a basic format
  const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailPattern.test(email)) {
    document.getElementById('status').textContent = "❌ Please enter a valid email address.";
    return;
  }

  // Phone validation: must be digits only and at least 10 characters
  const phonePattern = /^[0-9]{10,}$/;
  if (!phonePattern.test(phone)) {
    document.getElementById('status').textContent = "❌ Please enter a valid phone number (digits only, at least 10 numbers).";
    return;
  }

  // Show loader and disable button
  submitBtn.disabled = true;
  btnText.style.display = 'none';
  loader.style.display = 'inline-block';

  fetch(scriptURL, {
    method: 'POST',
    body: formData
  })
  .then(res => res.text())
  .then(msg => {
    document.getElementById('status').textContent = "✅ Registration Success!";
    form.reset();
  })
  .catch(err => {
    document.getElementById('status').textContent = "❌ Error!";
    console.error(err);
  })
  .finally(() => {
    // Hide loader and enable button
    submitBtn.disabled = false;
    btnText.style.display = 'inline';
    loader.style.display = 'none';
  });
});
</script>
</body>
</html>
